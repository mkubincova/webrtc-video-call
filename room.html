<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video call app</title>
    <link rel="stylesheet" href="./src/style.css" />
  </head>
  <body>
    <div id="app" class="app">
      <!-- Connection status -->
      <div id="status" class="status-sidebar">
        <div class="status-info">
          <h2 id="roomInfo">Not in a room</h2>
          <span id="userCount" class="badge">0 users</span>
        </div>
        <div id="systemMessages" class="system-messages"></div>
        <div class="status-actions">
          <button id="leaveRoom" class="leave-btn">Leave Room</button>
        </div>
      </div>

      <div id="content" class="main-content">
        <h1>WebRTC Chat and Video Call</h1>
        <h2 class="subtitle">
          Once the other user joins the room, you'll be able to call and chat
          with them. The messages are only visible to people currently in the
          room and will disapper once both of you leave.
        </h2>
        <div class="content-layout">
          <div class="video-section">
            <!-- Video elements -->
            <div id="videos" class="videos-container">
              <video
                id="localVideo"
                autoplay
                muted
                playsinline
                class="local-video"
              ></video>
              <video
                id="remoteVideo"
                autoplay
                playsinline
                class="remote-video"
              ></video>
            </div>
            <div class="video-controls">
              <button id="startCall" class="btn-success" disabled>
                Start Call
              </button>
              <button id="endCall" class="btn-danger" hidden>End Call</button>
            </div>
          </div>

          <div class="chat-section">
            <!-- Chat box -->
            <div id="chat" class="chat-messages"></div>

            <!-- Message input -->
            <form id="messageForm" class="message-form">
              <input id="message" type="text" placeholder="Type a message..." />
              <button id="sendMessage" type="submit" disabled>Send</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="./src/room.ts"></script>
  </body>
</html>
